# SetLux ‚Äì All in One

**SetLux** es una plataforma integral de gesti√≥n para el departamento de iluminaci√≥n en producciones audiovisuales. Dise√±ada espec√≠ficamente para profesionales del sector, SetLux centraliza y automatiza todas las tareas administrativas, de planificaci√≥n y c√°lculo relacionadas con la gesti√≥n de equipos de iluminaci√≥n, desde la preproducci√≥n hasta la liquidaci√≥n de n√≥minas.

---

## üéØ Visi√≥n del Producto

SetLux nace de la necesidad de digitalizar y optimizar los procesos administrativos del departamento de iluminaci√≥n en producciones audiovisuales. La plataforma elimina la dependencia de hojas de c√°lculo dispersas, documentos f√≠sicos y c√°lculos manuales propensos a errores, ofreciendo una soluci√≥n √∫nica que integra planificaci√≥n, gesti√≥n de equipo, condiciones laborales, reportes y n√≥minas en un solo lugar.

---

## ‚ú® Caracter√≠sticas Principales

### üìÖ **Planificaci√≥n (Planning)**

Sistema completo de planificaci√≥n de rodaje que permite gestionar todas las semanas de producci√≥n de forma estructurada y visual.

**Funcionalidades:**
- **Gesti√≥n de semanas de preproducci√≥n y producci√≥n**: Organiza el rodaje en bloques separados (preproducci√≥n y producci√≥n) con control independiente
- **Calendario interactivo**: Visualiza y edita jornadas diarias con informaci√≥n detallada:
  - Fechas y d√≠as de la semana
  - Tipo de jornada (trabajo, descanso, etc.)
  - Horarios de inicio y fin
  - Corte de c√°mara
  - Localizaci√≥n t√©cnica
  - Equipo asignado (base, prelight, pickup)
  - Prelight con horarios espec√≠ficos
  - Recogida de material
  - Incidencias y notas
- **Gesti√≥n de festivos**: Integraci√≥n autom√°tica con calendarios de festivos nacionales y regionales (Espa√±a, con soporte para m√∫ltiples regiones)
- **Asignaci√≥n de equipo**: Asigna miembros del equipo a d√≠as espec√≠ficos con roles diferenciados (base, prelight, pickup)
- **Exportaci√≥n**: Genera documentos HTML y PDF de planificaci√≥n completa o por semanas individuales
- **Duplicaci√≥n de semanas**: Funcionalidad para duplicar semanas completas acelerando la planificaci√≥n
- **Validaci√≥n autom√°tica**: Detecta conflictos y problemas en la planificaci√≥n

**Beneficios:**
- Planificaci√≥n visual e intuitiva
- Reducci√≥n de errores en la asignaci√≥n de equipo
- Exportaci√≥n profesional para compartir con producci√≥n
- Ahorro de tiempo en la creaci√≥n de calendarios

---

### üë• **Gesti√≥n de Equipo (Team Management)**

Herramienta completa para gestionar todos los miembros del equipo de iluminaci√≥n y sus roles.

**Funcionalidades:**
- **Gesti√≥n de roles**: Define y gestiona diferentes roles del departamento:
  - Gaffer (G)
  - Best Boy (BB)
  - El√©ctrico (E)
  - T√©cnico de Mesa (TM)
  - Finger Boy (FB)
  - Auxiliar (AUX)
  - Maquinista (M)
  - Refuerzos (REF)
- **Equipos especializados**: Organiza el equipo en tres categor√≠as:
  - **Equipo Base**: Personal principal de rodaje
  - **Equipo Prelight**: Personal de preparaci√≥n y montaje
  - **Equipo Pickup**: Personal de recogida y desmontaje
- **Refuerzos**: Gestiona trabajadores espor√°dicos o de refuerzo
- **Asignaci√≥n de nombres**: Asocia nombres reales a cada rol
- **Sincronizaci√≥n autom√°tica**: El equipo se sincroniza autom√°ticamente con la planificaci√≥n y n√≥minas

**Beneficios:**
- Organizaci√≥n clara de la estructura del equipo
- Facilita la asignaci√≥n en planificaci√≥n
- Base de datos reutilizable entre proyectos
- Integraci√≥n perfecta con otros m√≥dulos

---

### üìã **Condiciones Laborales (Working Conditions)**

Sistema completo de gesti√≥n de condiciones laborales, precios y pol√≠ticas del departamento seg√∫n el tipo de producci√≥n.

**Tipos de condiciones soportadas:**
- **Condiciones Semanales**: Para producciones con estructura semanal
- **Condiciones Mensuales**: Para producciones con estructura mensual
- **Condiciones Publicidad**: Para producciones de publicidad con estructura espec√≠fica

**Funcionalidades principales:**

#### Gesti√≥n de Precios por Rol
- **Precios base configurables**: Define precios para cada rol del equipo
- **C√°lculo autom√°tico**: El sistema calcula autom√°ticamente:
  - Precio mensual (a partir del semanal)
  - Precio semanal (a partir del mensual o diario)
  - Precio diario
  - Precio jornada
  - Precio refuerzo
  - Precio d√≠a extra/festivo
  - Travel day
  - Horas extras
- **Precios especiales para publicidad**:
  - Localizaci√≥n t√©cnica
  - Carga/descarga
  - Preparaci√≥n, montaje y desmontaje

#### Par√°metros de C√°lculo
- **Jornada laboral**: Horas de trabajo est√°ndar
- **Jornada comida**: Tiempo de descanso para comida
- **D√≠as de trabajo**: D√≠as laborables por semana
- **Semanas por mes**: Factor de conversi√≥n
- **Factores de bonificaci√≥n**:
  - Factor festivo (multiplicador para d√≠as festivos)
  - Factor hora extra
  - Factor hora extra festiva/nocturna
- **Turn Around**: Descanso m√≠nimo entre jornadas (diario y fin de semana)
- **Nocturnidad**: Horarios y complementos para jornadas nocturnas
- **Cortes√≠a**: Minutos de cortes√≠a antes de considerar hora extra

#### Gesti√≥n de Dietas y Gastos
- **Dietas configurables**: Comida, cena, desayuno, dieta completa
- **Gastos de bolsillo**: Importes configurables
- **Alojamiento**: Precios de alojamiento con desayuno
- **Transporte**: Kilometraje y transporte por d√≠a
- **Incremento internacional**: Bonificaci√≥n del 50% fuera del territorio nacional

#### Documentaci√≥n Legal y Pol√≠ticas
- **Leyenda de c√°lculos**: Explicaci√≥n detallada de c√≥mo se calculan los precios (con soporte Markdown)
- **Festivos**: Gesti√≥n de d√≠as festivos con integraci√≥n autom√°tica
- **Horarios**: Pol√≠ticas de turn around y nocturnidad
- **Dietas**: Pol√≠ticas y importes de dietas
- **Transportes**: Pol√≠ticas de desplazamiento y kilometraje
- **Alojamiento**: Condiciones de alojamiento
- **Preproducci√≥n**: Condiciones espec√≠ficas de preproducci√≥n
- **Convenio**: Referencias al convenio colectivo (con enlace al BOE)

#### Exportaci√≥n Profesional
- **Exportaci√≥n a PDF**: Genera documentos PDF profesionales con todas las condiciones
- **Multiidioma**: Soporte para espa√±ol, ingl√©s y catal√°n
- **Paginaci√≥n inteligente**: Divide autom√°ticamente documentos largos en m√∫ltiples p√°ginas

**Beneficios:**
- Transparencia total en condiciones laborales
- C√°lculos autom√°ticos precisos
- Documentaci√≥n profesional lista para compartir
- Cumplimiento legal con referencias al convenio
- Personalizaci√≥n completa seg√∫n tipo de producci√≥n

---

### üìä **Reportes (Reports)**

Sistema avanzado de reportes semanales que permite registrar y calcular todos los conceptos econ√≥micos del equipo.

**Funcionalidades:**

#### Conceptos Registrables
- **Horas extra**: Registro autom√°tico y manual con diferentes tipos:
  - Hora Extra - Normal
  - Hora Extra - Minutaje desde corte
  - Hora Extra - Minutaje + Cortes√≠a
- **Turn Around**: Registro de turn arounds realizados
- **Nocturnidad**: Registro de jornadas nocturnas
- **Penalty lunch**: Registro de comidas no proporcionadas
- **Dietas**: Sistema completo de gesti√≥n de dietas:
  - Comida
  - Cena
  - Desayuno
  - Dieta sin pernoctar
  - Dieta completa + desayuno
  - Gastos de bolsillo
  - Ticket (importe num√©rico)
- **Kilometraje**: Registro de kil√≥metros recorridos
- **Transporte**: Registro de d√≠as de transporte

#### Caracter√≠sticas Avanzadas
- **C√°lculos autom√°ticos**: El sistema calcula autom√°ticamente:
  - Horas extra basadas en planificaci√≥n y horarios reales
  - Turn arounds basados en jornadas consecutivas
  - Nocturnidad basada en horarios de inicio/fin
  - Totales por concepto y por persona
- **Validaci√≥n inteligente**: Solo permite registrar conceptos para personas que est√°n asignadas en la planificaci√≥n
- **Agrupaci√≥n por mes**: Organiza reportes por meses para facilitar la gesti√≥n
- **Filtros de fecha**: Permite filtrar reportes por rangos de fechas
- **Estado colapsable**: Cada persona puede expandirse/colapsarse para mejor visualizaci√≥n
- **Persistencia autom√°tica**: Todos los datos se guardan autom√°ticamente

#### Exportaci√≥n
- **Exportaci√≥n PDF**: Genera documentos PDF profesionales por semana o por rango de fechas
- **Formato profesional**: Incluye encabezados, totales y formato tabular

**Beneficios:**
- Registro preciso de todos los conceptos
- C√°lculos autom√°ticos que reducen errores
- Validaci√≥n que previene registros incorrectos
- Exportaci√≥n profesional para contabilidad
- Ahorro significativo de tiempo en la gesti√≥n

---

### üí∞ **N√≥mina (Payroll)**

Sistema completo de c√°lculo y gesti√≥n de n√≥minas mensuales para todo el equipo de iluminaci√≥n.

**Tipos de n√≥mina soportados:**
- **N√≥mina Semanal**: Para producciones con estructura semanal
- **N√≥mina Mensual**: Para producciones con estructura mensual
- **N√≥mina Publicidad**: Para producciones de publicidad

**Funcionalidades:**

#### C√°lculos Autom√°ticos
- **D√≠as trabajados**: Calcula autom√°ticamente d√≠as trabajados por persona:
  - D√≠as base (rodaje)
  - D√≠as prelight (preparaci√≥n)
  - D√≠as pickup (recogida)
  - D√≠as festivos
  - Travel days
  - D√≠as de oficina
- **Desglose detallado**: Para cada persona muestra:
  - D√≠as trabajados por tipo
  - Precios aplicados seg√∫n rol
  - Conceptos adicionales (horas extra, dietas, etc.)
  - Totales por concepto
  - Total bruto

#### Conceptos Calculados
- **Sueldo base**: Seg√∫n d√≠as trabajados y precio del rol
- **Horas extra**: Calculadas autom√°ticamente desde reportes
- **Turn Around**: Bonificaciones por turn around
- **Nocturnidad**: Complementos por jornadas nocturnas
- **Penalty lunch**: Comidas no proporcionadas
- **Dietas**: Todas las dietas registradas en reportes
- **Kilometraje**: Calculado desde reportes
- **Transporte**: D√≠as de transporte
- **Carga/Descarga**: Para producciones de publicidad
- **Localizaci√≥n t√©cnica**: Para producciones de publicidad

#### Gesti√≥n Avanzada
- **Ventanas contables**: Permite ajustar per√≠odos contables independientes de la planificaci√≥n
- **Filtros por fecha**: Filtra n√≥minas por rangos de fechas espec√≠ficos
- **Agrupaci√≥n por mes**: Organiza n√≥minas por meses naturales
- **Refuerzos**: Gestiona trabajadores espor√°dicos con precios especiales
- **Res√∫menes**: Muestra res√∫menes de d√≠as trabajados, dietas y extras

#### Exportaci√≥n
- **Exportaci√≥n PDF**: Genera documentos PDF profesionales con paginaci√≥n autom√°tica
- **Formato contable**: Incluye todos los detalles necesarios para contabilidad

**Beneficios:**
- C√°lculos precisos y autom√°ticos
- Ahorro de horas de trabajo manual
- Reducci√≥n de errores en n√≥minas
- Documentaci√≥n completa para contabilidad
- Transparencia total en los c√°lculos

---

### üìù **Necesidades (Needs)**

Sistema de gesti√≥n de necesidades del departamento durante la producci√≥n.

**Funcionalidades:**
- **Registro de necesidades**: Organiza necesidades por semanas
- **Campos personalizables**: Define campos espec√≠ficos para cada necesidad
- **Listas de elementos**: Gestiona listas de materiales, equipos, etc.
- **Exportaci√≥n**: Genera documentos de necesidades para compartir con producci√≥n

**Beneficios:**
- Organizaci√≥n clara de necesidades
- Comunicaci√≥n eficiente con producci√≥n
- Documentaci√≥n profesional

---

## üöÄ Caracter√≠sticas T√©cnicas

### **Multiidioma**
- Soporte completo para **Espa√±ol**, **Ingl√©s** y **Catal√°n**
- Interfaz completamente traducida
- Documentos exportados en el idioma seleccionado
- Cambio de idioma en tiempo real

### **Multi-proyecto**
- Gesti√≥n ilimitada de proyectos
- Cada proyecto es independiente con su propia configuraci√≥n
- Organizaci√≥n por estado (activo/cerrado)
- B√∫squeda y filtrado avanzado de proyectos

### **Persistencia Local**
- Privacidad total de los datos
- Sincronizaci√≥n autom√°tica entre pesta√±as

### **Exportaci√≥n Profesional**
- **PDF de alta calidad**: Genera documentos PDF profesionales
- **Paginaci√≥n autom√°tica**: Divide documentos largos en m√∫ltiples p√°ginas

### **Interfaz Moderna**
- Dise√±o responsive y adaptable
- Tema claro/oscuro
- Navegaci√≥n intuitiva
- Componentes accesibles (A11y)

### **Rendimiento Optimizado**
- C√°lculos eficientes incluso con grandes vol√∫menes de datos
- Memoizaci√≥n inteligente de componentes
- Carga r√°pida y fluida

---

## üé¨ Casos de Uso

### **Producci√≥n de Largometraje**
- Planificaci√≥n completa de semanas de rodaje
- Gesti√≥n de equipo grande con m√∫ltiples roles
- C√°lculo de n√≥minas mensuales complejas
- Reportes detallados de todas las semanas

### **Producci√≥n de Publicidad**
- Condiciones espec√≠ficas de publicidad
- Gesti√≥n de localizaciones t√©cnicas
- C√°lculo de carga/descarga
- N√≥minas con estructura de publicidad

### **Producci√≥n de Serie**
- M√∫ltiples proyectos (una por temporada/episodio)
- Reutilizaci√≥n de equipo entre proyectos
- Condiciones estandarizadas
- Gesti√≥n eficiente de m√∫ltiples semanas

### **Preproducci√≥n**
- Planificaci√≥n de semanas de preproducci√≥n
- Gesti√≥n de equipo de prelight
- C√°lculo de necesidades
- Preparaci√≥n de condiciones laborales

---

## üí° Ventajas Competitivas

1. **Todo en Uno**: √önica plataforma que integra planificaci√≥n, equipo, condiciones, reportes y n√≥minas
2. **Automatizaci√≥n**: C√°lculos autom√°ticos que eliminan errores humanos
3. **Especializaci√≥n**: Dise√±ado espec√≠ficamente para el departamento de iluminaci√≥n
4. **Profesional**: Exportaciones PDF de calidad profesional
5. **Flexible**: Soporta diferentes tipos de producci√≥n (semanal, mensual, publicidad)
6. **Multiidioma**: Soporte completo para espa√±ol, ingl√©s y catal√°n
7. **Actualizado**: Integraci√≥n con calendarios de festivos y referencias legales actualizadas

---

## üîß Tecnolog√≠as

- **Frontend**: React 19 + TypeScript
- **Build Tool**: Vite
- **Estilos**: Tailwind CSS
- **Testing**: Vitest + Testing Library
- **Internacionalizaci√≥n**: i18next
- **Exportaci√≥n PDF**: html2pdf.js + html2canvas
- **Markdown**: marked
- **Routing**: React Router

---

## üìñ Estructura del Proyecto

```
src/
  app/               # Layouts, routing, providers
  features/          # M√≥dulos por dominio (Feature-Sliced)
    planificacion/   # M√≥dulo de planificaci√≥n
    reportes/        # M√≥dulo de reportes
    nomina/          # M√≥dulo de n√≥minas
    necesidades/     # M√≥dulo de necesidades
    equipo/          # M√≥dulo de gesti√≥n de equipo
    condiciones/     # M√≥dulo de condiciones laborales
    projects/        # M√≥dulo de gesti√≥n de proyectos
  shared/            # Componentes, hooks, servicios, utils reutilizables
  locales/           # Traducciones (es, en, ca)
  types/             # Tipos globales
```

---

## üéØ P√∫blico Objetivo

SetLux est√° dise√±ado para:

- **Gaffers**: Jefes de departamento de iluminaci√≥n que necesitan gestionar todo el equipo
- **Best Boys**: Asistentes que ayudan en la gesti√≥n administrativa

---

## üåü Valor A√±adido

SetLux transforma la gesti√≥n del departamento de iluminaci√≥n de un proceso manual, propenso a errores y disperso en m√∫ltiples herramientas, a un flujo digitalizado, automatizado y centralizado que:

- **Ahorra tiempo**: Reduce horas de trabajo manual en c√°lculos y documentaci√≥n
- **Reduce errores**: Automatizaci√≥n que elimina errores humanos
- **Mejora la comunicaci√≥n**: Documentos profesionales listos para compartir
- **Aumenta la transparencia**: Todos los c√°lculos son visibles y verificables
- **Facilita el cumplimiento legal**: Referencias al convenio y pol√≠ticas claras
- **Optimiza la organizaci√≥n**: Todo en un solo lugar, f√°cil de encontrar y gestionar

---

## üìû Informaci√≥n Adicional

Para m√°s informaci√≥n sobre funcionalidades espec√≠ficas, consulta la documentaci√≥n t√©cnica en el c√≥digo o contacta con el equipo de desarrollo.

---

**SetLux ‚Äì All in One**  
*La soluci√≥n completa para la gesti√≥n del departamento de iluminaci√≥n*
